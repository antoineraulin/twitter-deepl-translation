var url="";var w=0;url=window.location.href;setNewButton();setInterval(function(){if(url!=window.location.href){url=window.location.href;document.getElementById("deeplScript").remove();setNewButton();}},100);function setNewButton(){setTimeout(function(){var myScript=document.createElement("script");myScript.setAttribute("id","deeplScript");myScript.innerHTML=`var port=chrome.runtime.connect("llbkoopdcgppaejfihjmlhclnpdpkgkk");function hasClass(element,cls){return(' '+element.className+' ').indexOf(' '+cls+' ')>-1;}
var trad=false;function deepl(id){var button=document.getElementById(id);var divParent=button.parentElement;var tweetdiv=divParent.querySelector(".js-tweet-text-container");var tweetp=tweetdiv.querySelector(".tweet-text");var html=tweetp.innerHTML;tweetp.innerHTML="";button.innerHTML="Processing...";if(html.indexOf("<")>-1){var arr=[];while(html.indexOf("<")>-1){var begin=html.indexOf("<");if(html[begin+1]=="a"){var end=html.indexOf("</a>");var before=html.substring(0,begin);var link=html.substring(begin,end+4);arr.push(before);arr.push(link);html=html.replace(before,"");html=html.replace(link,"");}else if(html[begin+1]=="i"){var end=html.indexOf(">");var before=html.substring(0,begin);var link=html.substring(begin,end+1);arr.push(before);arr.push(link);html=html.replace(before,"");html=html.replace(link,"");}}
if(html!=""){arr.push(html);}
var i=0;var ti=setInterval(function(){if(trad){}else{if(i<arr.length){port.postMessage({id:id,data:arr[i],multi:true,array:arr,i:i});trad=true;i=i+2;}else{clearInterval(ti);}}},100);}else{port.postMessage({id:id,data:html,multi:false});}}
port.onMessage.addListener(function(e){if(e.error!=true){var button=document.getElementById(e.id);var divParent=button.parentElement;var tweetdiv=divParent.querySelector(".js-tweet-text-container");var tweetp=tweetdiv.querySelector(".tweet-text");if(e.multi){if(e.i+1<e.array.length)tweetp.innerHTML+=e.data+" "+e.array[e.i+1]+" ";else tweetp.innerHTML+=e.data;trad=false;}else{tweetp.innerHTML=e.data;}
button.innerHTML="translated with deepl !";}});`;var head=document.getElementsByTagName("head")[0];document.body.appendChild(myScript);var translateButton=document.querySelectorAll(".translate-button");translateButton.forEach(element=>{element.outerHTML=`<button id="deepl-`+w+`"type="button"style="color: #657786;font-size: 12px;margin: 6px -2px -2px 0;text-align: left;padding: 0;background-color: transparent;background-image: none;border: 0;cursor: pointer;border-radius: 0;box-shadow: none;"onclick="deepl('deepl-`+w+`')"><span class="Icon Icon--translator"></span>Translate with DeepL</button>`;w++;});},2000);}
Element.prototype.remove=function(){this.parentElement.removeChild(this);}